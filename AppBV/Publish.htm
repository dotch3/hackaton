<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>APP Boa Vizinhança - Novo Item</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
        integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- Bootstrap 4 -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous">
        </script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
        integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous">
        </script>

    <!-- Normalize.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
        crossorigin="anonymous">

    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
        crossorigin="anonymous"></script>

    <!-- Cadastro Style -->
    <link rel="stylesheet" href="css/styleItemCadastro.css">
    <link rel="stylesheet" href="css/tagsStyle.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div id="dismiss">
                <i class="fas fa-times-circle"></i>
            </div>

            <div class="sidebar-header">
                <h5>Menu</h5>
                <br />
                <img src="images/profile.png" width="94" height="94" alt="Perfil" />
            </div>
            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false">Minhas publicações</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#">Item 1</a>
                        </li>
                        <li>
                            <a href="#">Item 2</a>
                        </li>
                        <li>
                            <a href="#">Item 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Publicações salvas</a>
                </li>
                <li>
                    <a href="#">Configurações</a>
                </li>
                <li>
                    <a href="#">Central de ajuda</a>
                </li>
            </ul>
            <ul class="list-unstyled">
                <li>
                    <a href="Default.htm">Sair</a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content" class="container-fluid">

            <nav class="navbar navbar-expand-lg navbar-light bg-light bv-nav">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-6">
                            <button id="sidebarCollapse" class="btn btn-dark d-inline-block d-lg-none ml-auto"
                                type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                                aria-controls="navbarSupportedContent" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <i class="fas fa-align-justify" style="font-size: 20px;"></i>
                            </button>
                            Boa Vizinhança
                        </div>
                        <div class="col-xs-4">
                            <!-- Search form -->
                            <form class="form-inline d-flex justify-content-center md-form form-sm">
                                <input class="form-control form-control-sm mr-3 w-75" type="text"
                                    placeholder="Pesquisar" style="margin-top: 5px; width: 120px; height: 25px"
                                    aria-label="Search" />
                            </form>
                        </div>
                        <div class="col-xs-2">
                            <button id="sidebarCollapse" class="btn btn-dark d-inline-block d-lg-none ml-auto"
                                data-toggle="modal" data-target=".modal-pesquisa" type="button" data-toggle="collapse"
                                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                                <i class="fas fa-search" style="font-size: 20px;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Code for Novo Item -->
            <div class="col-md-10 container-fluid">

                <div class="form-group col-md-12 container-fluid">
                    <h5 style="text-align-last: center;color: #EFA845;font-weight: 200;
                                    padding-top: 0.5rem"> <strong>NOVO ITEM</strong> </h5>
                    <!-- For printing result from server -->

                    <div class="container">
                        <!-- Section for the preview Image -->
                        <div class="col-md-12 preview-image ">
                            <div class="personal-image">
                                <label for="imgItem">
                                    <input type="file" multiple accept='image/*' name="imgItem" id="imgItem">
                                    <figure class="personal-figure">
                                        <img id="imgProfile" style="width: 120px;height: 120px;"
                                            class="personal-avatar">
                                    </figure>
                                </label>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="idProprietario"> ID PROPRIETARIO</label>
                            <input type="text" class="form-control" name="idProprietario" id="idProprietario"
                                placeholder="" value="" readonly />
                        </div> -->
                        <div class="form-group">
                            <label for="nome"> NOME</label>
                            <input type="text" class="form-control publish" name="nome" id="nome" placeholder=""
                                value="" readonly />
                        </div>
                        <div class="md-form mb-0 form-group ">
                            <label for="message">DESCRIÇÃO</label>
                            <textarea type="text" id="descricao" name="descricao" rows="2"
                                class="form-control  publish md-textarea" placeholder="" style="resize: none;"
                                readonly></textarea>
                        </div>
                        <div class="form-group">
                            <label for="nome"> QUANTIDADE DISPONIVEL</label>
                            <input type="text" class="form-control publish" name="quantidadeDisponivel"
                                id="quantidadeDisponivel" placeholder="" value="" readonly />
                        </div>
                        <div class="form-group">
                            <label for="nome"> VALOR</label>
                            <input type="text" class="form-control publish" name="valor" id="valor" placeholder=""
                                value="" readonly />
                        </div>
                        <div class="container detalhe-item">
                            <div class="form-check container-fluid container">
                                <input class="form-check-input" type="radio" name="tipoValor" id="mvirtual" value="1">
                                <label class="form-check-label" for="mvirtual">
                                    Moeda Virtual
                                </label>
                            </div>
                            <div class="form-check container-fluid container">
                                <input class="form-check-input" type="radio" name="tipoValor" id="mreal" value="2">
                                <label class="form-check-label" for="mreal">
                                    Moeda Reais
                                </label>
                            </div>
                        </div>
                        <div class="md-form mb-0 form-group ">
                            <label for="message">OBSERVAÇÃO</label>
                            <textarea type="text" id="observacao" name="observacao" rows="2"
                                class="form-control publish md-textarea" placeholder="" style="resize: none;"
                                readonly></textarea>
                        </div>

                        <!-- TAGS -->
                        <div>
                            <div class="row">
                                <div class="col-md-12 container">
                                    <div class="form-group ">
                                        <label for="tags">TAGS</label>
                                        <input type="text" value="test,test2,test3,test5" name="tags" id="tags"
                                            class="tagsinput view-tag publish" data-role="tagsinput" readonly
                                            onchange="this.style.width = ((this.value.length + 1) * 8) + 'px';" />
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="container">
                        <div class="row">
                            <br>
                            <button type="button" class="btn btn-outline-secondary btn-lg btn-block" style="background: #feb856 !important;  color: white !important;  
                                                            font-weight: 400 !important; border-color: #feb856;
                                                            margin-bottom: 1rem; font-size: 1.25rem;"
                                onclick="window.location.href='Itens.htm'">OK</button>
                            <p>&nbsp;</p>
                        </div>
                    </div>
                </div>
                <div class="overlay"></div>
                <div class="modal fade modal-pesquisa" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-sm">
                        <div class="modal-content">
                            Ao clicar conecta com a API Java de pesquisa
                        </div>
                    </div>
                </div>
                <p>&nbsp;</p>

                <div class="navbar navbar-default navbar-fixed-bottom">
                    <div class="container">
                        <p class="navbar-text pull-left">

                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-xs-1"></div>
                                <div class="col-xs-10"><a href="CadastroItem.htm"><img src="images/menu_bottom.png"
                                            width="268" height="50" /></a></div>
                                <div class="col-xs-3"></div>
                            </div>
                        </div>

                        </p>
                    </div>
                </div>

            </div>

            <!-- Include all compiled plugins (below), or include individual files as needed -->

            <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
                integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
                crossorigin="anonymous"></script>
            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
            <script src="https://code.jquery.com/jquery-1.12.4.min.js"
                integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
                crossorigin="anonymous"></script>



            <!-- Modals -->
            <!-- jQuery Custom Scroller CDN -->
            <script
                src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js">
                </script>

            <!-- JS functions -->
            <script src="js/scripts.js"></script>

            <script>
                $(document).ready(function () {
                    checkCookie();
                    getItemId();

                    $("#sidebar").mCustomScrollbar({
                        theme: "minimal"
                    });

                    $('#dismiss, .overlay').on('click', function () {
                        $('#sidebar').removeClass('active');
                        $('.overlay').removeClass('active');
                    });

                    $('#sidebarCollapse').on('click', function () {
                        $('#sidebar').addClass('active');
                        $('.overlay').addClass('active');
                        $('.collapse.in').toggleClass('in');
                        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
                    });
                });
                var tag = document.getElementById("tags");
                if (tag.value.length > 0) {

                    tag.style.width =
                        ((tag.value.length + 1) * 6) + 'px';
                    console.log('new size:', tag.value.length + 1, (tag.value.length + 1) * 8);
                }
                // Loading the idItem from Storage
                function getItemId() {
                    itemId = sessionStorage.getItem("itemId");
                    // Fetching Data
                    if (itemId != undefined) {
                        runWSGetItemById('http://54.163.66.128:8080/items/findItem/' + itemId, function (text) {
                            var data = JSON.parse(text);
                            console.log('Get Item data:', data);
                            detalheItem(data, itemId);
                        });
                    }
                }

                function runWSGetItemById(requestURL, callback) {
                    var rawFile = new XMLHttpRequest();
                    rawFile.overrideMimeType("application/json");
                    rawFile.open("GET", requestURL, true);
                    rawFile.onreadystatechange = function () {
                        if (rawFile.readyState === 4 && rawFile.status == "200") {
                            callback(rawFile.responseText);
                        }
                    }
                    rawFile.send(null);
                }

                // fulfilling the page
                function detalheItem(jsonObj, idItem) {

                    if (jsonObj !== undefined) {
                        if (jsonObj.idItem == idItem) {
                            if (jsonObj.foto != undefined) {
                                base64 = "data:image/png;base64," + jsonObj.foto;
                                document.getElementById('imgProfile').setAttribute('src', base64)
                            }
                            document.getElementById("nome").value = jsonObj.nome;
                            document.getElementById("descricao").value = jsonObj.descricao;
                            document.getElementById("quantidadeDisponivel").value = jsonObj.quantidadeDisponivel;

                            document.getElementById("valor").value = jsonObj.valor;
                            // checking what type of money is :1 virtual, 2: real
                            if (jsonObj["tipoValor"] != undefined) {

                                if (jsonObj["tipoValor"] == 1) {
                                    console.log('mvirtual');
                                    document.getElementById("mvirtual").checked = true;
                                }
                                else {
                                    console.log('mreal');
                                    document.getElementById("mreal").checked = true;
                                }

                            }
                            document.getElementById("observacao").value = jsonObj.observacao;
                            document.getElementById("tags").value = jsonObj.tags;

                        }
                    }
                }
            </script>
</body>

</html>